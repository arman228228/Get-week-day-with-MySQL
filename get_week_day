stock get_week_day()
{
  new dayid,
    Cache: result,
		year, month, day,
		fmt_date[64];
		
	getdate(year, month, day);
	
  /*
  mysql_connect_id - instead, use your database connection variable
  */
  
	mysql_format(mysql_connect_id, fmt_date, 64, "SELECT WEEKDAY(\"%02d-%02d-%d\")", year, month, day);
	
	result = mysql_query(mysql_connect_id, fmt_date);
	new rows = cache_num_rows();

	if(rows)
		cache_get_value_index_int(0, 0, dayid);

	if(cache_is_valid(result)) 
    cache_delete(result);
    
  return dayid;
}
